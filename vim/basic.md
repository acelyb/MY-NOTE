# Vim 教程

## 认识 Vim

Vim 常用有四个模式：

1. 正常模式(Normal-mode)
2. 插入模式(Insert-mode)
3. 命令模式(Command-mode)
4. 可视模式(Visual-mode)

* 正常模式

正常模式一般用于浏览文件，也包括一些复制、粘贴、删除等操作。这时击键时，一些组合键就是 vim 的功能键，而不会在文本中键入对应的字符

按`Esc`进入正常模式

* 插入模式

按 `i` 键会进行插入模式。该模式启动以后，就会进入编辑状态，通过键盘输入内容

* 命令模式

在正常模式中，按下`:`（冒号）键或者`/` （斜杠），会进入命令模式。在命令模式中可以执行一些输入并执行一些 VIM 或插件提供的指令，就像在shell里一样。这些指令包括设置环境、文件操作、调用某个功能等等

* 可视模式

在正常模式按下`v, V, <Ctrl>+v`，可以进入可视模式。可视模式中的操作有点像拿鼠标进行操作，选择文本的时候有一种鼠标选择的即视感，有时候会很方便

## Vim 打开文件

### 一次打开多个文件

举例打开两个文件 file1，file2

```shell
vim file1 file2
```

该方式打开文件，显示屏默认显示第一个文件也就是 file1，如何进行文件间的切换呢？VIM 的正常模式下（参考上文关于正常模式的描述）按下键盘上的冒号 `:` 这时会在显示屏底部出现冒号 `:`（进入了 VIM 的命令模式），然后在输入 `ls` ，屏幕上会出现打开的所有文件的序号和文件名，我们继续输入冒号 `:` ，然后输入 `bn` (这里的 `n` 需要做一个解释并不是键盘上的 `n` ,而是文件序号的代指，如 `b1` 代表显示屏上切换到第一个文件，`b2` 代表显示屏上切换到第二个文件)

```shell
:ls
```

上面这个命令将会列出 VIM 打开的所有文件

```shell
:b2
```

上面的这个命令将会在显示屏上显示第二个文件

### 显示多个文件

VIM 可以实现分屏操作，一个屏幕被多个文件给分占，有左右和上下两种分屏的方式

左右分屏如下操作

```shell
vim -On file1 file2 ... filen
```

这里的 n （ n 是要打开的具体文件的数目：1,2,3 ...）是代表有几个文件需要分屏，从左至右依次显示 n 个文件

上下分屏操作

```shell
vim -on file1 file2 ... filen
```

这个命令跟上一个命令不同的是其中的参数 -on（ n 是要打开的具体文件的数目：1,2,3 ...） 中的 o 是小写，这样将会上下依次显示 n 个文件

#### Vim 分屏操作

按住组合键 `Ctrl + w` ，然后再按下 `s`

```shell
Ctrl + w s
```

上面这个命令将会上下分割当前打开的文件

按住冒号`:`，紧接着输入 `sp` ，再键入文件名，如下

```shell
:sp file
```

上面的这个命令将会上下分割当前文件和新打开的 file

按住组合键 `Ctrl + w` ,然后在按下 `v`

```shell
Ctrl + w v
```

上面的这个命令将会左右分割当前的文件

按住冒号`:`，紧接着输入 `vsp` ，在键入文件名称，如下

```shell
:vsp file
```

上面的这个命令将会左右分割当前打开的文件和新打开的文件 file

#### 切换光标 移动分屏

1. 切换左右分屏的光标

```shell
Ctrl + w h
```

将当前的光标定位到左边的屏幕

```shell
Ctrl + w l
```

将当前的光标定位到右边的屏幕

2. 移动左右分屏

```shell
Ctrl + w H
```

将当前的分屏移动到左边

```shell
Ctrl + w L
```

将当前的分屏移动到右边

3. 切换上下分屏的光标

```shell
Ctrl + w j
```

将当前的光标移动到下面的分屏

```shell
Ctrl + w k
```

将当前的光标移动到上面的分屏

4. 移动上下分屏

```shell
Ctrl + w J
```

将当前的分屏移动到下面

```shell
Ctrl + w K
```

将当前的分屏移动到上面

#### 关闭分屏

```shell
Ctrl + w c
```

上面这个命令是关闭当前的分屏

```shell
Ctrl + w q
```

上面这个命令也是关闭当前的分屏，如果是最后一个分屏将会退出 VIM

## 正常模式

| 命令 | 作用 |
| :-- | :-- |
| 方向键 | 移动光标 |
| x | 删除某个字符 |
| dw | 删除（剪切）一个单词 |
| dd | 删除（剪切）某行 |
| ndd | 删除（剪切）当前行开始的n行 |
| yw | 复制一个单词 |
| yy | 复制游标所在行 |
| nyy | 复制当前开始的n行 |
| p | 在当前行的下一行粘贴剪切板内容 |
| P | 在当前行的上一行粘贴剪切板内容 |
| u | 撤销上一步操作 |
| U | 撤销所有在前一个编辑行上的操作 |
| Ctrl + r | 恢复（上面两个命令的）撤销操作 |

### 移动光标

`nG` 光标定位到第 n 行的行首

`gg` 光标定位到第一行的行首

`G` 光标定位到最后一行的行首

### 大小写转换

`~` 将光标下的字母改变大小写
`3~` 将光标位置开始的3个字母改变其大小写
`g~~` 改变当前行字母的大小写
`gUU` 将当前行的字母改成大写
`guu` 将当前行的字母全改成小写

# 参考链接

1. [精通 VIM ，此文就够了](https://zhuanlan.zhihu.com/p/68111471)
